!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Turbo=i()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}var i=function(i,e){void 0===e&&(e={});var s=e.itemsToShow;void 0===s&&(s=1);var n=e.itemsToScroll;void 0===n&&(n=1);var o=e.infiniteScroll;void 0===o&&(o=!0);var r=e.centerMode;void 0===r&&(r=!1),this.el=t(i),this.settings={itemsToShow:s,itemsToScroll:n,infiniteScroll:o,centerMode:r},this.init()};return i.prototype.init=function(){this.items=Array.from(this.el.querySelectorAll(':scope > *:not([class^="turbo"])')),this.itemsCount=this.items.length-1,this.currentItem=0,this.itemWidth=0,this.clones=[],this.containerWidth=0,this.track=null,this.nextButton=this.el.querySelector(".turbo-next"),this.backButton=this.el.querySelector(".turbo-back"),this.isSliding=!1,this.initEvents(),this.initWrapper(),this.settings.infiniteScroll&&this.initClones(),this.updateWidth()},i.prototype.initWrapper=function(){var t=this,i=document.createDocumentFragment();this.track=document.createElement("div"),this.track.classList.add("turbo-track"),this.items.forEach(function(i,e){var s=document.createElement("div");s.classList.add("turbo-item"),s.appendChild(i),t.items[e]=s,t.track.appendChild(s)}),i.appendChild(this.track),this.el.appendChild(i)},i.prototype.initClones=function(){var t=this,i=document.createDocumentFragment();this.items.forEach(function(e){var s=e.cloneNode(!0);s.classList.add("turbo-clone"),t.clones.push(s),i.appendChild(s)}),this.track.appendChild(i);var e=document.createDocumentFragment();this.items.forEach(function(i){var s=i.cloneNode(!0);s.classList.add("turbo-clone"),t.clones.push(s),e.appendChild(s)}),this.track.insertBefore(e,this.track.firstChild)},i.prototype.initEvents=function(){this.nextButton&&this.nextButton.addEventListener("click",this.next.bind(this),!1),this.backButton&&this.backButton.addEventListener("click",this.back.bind(this),!1),window.addEventListener("resize",this.updateWidth.bind(this),!1)},i.prototype.updateWidth=function(){var t=this;this.containerWidth=this.el.offsetWidth,this.itemWidth=this.containerWidth/this.settings.itemsToShow-10,this.settings.centerMode&&(this.itemWidth=this.containerWidth/(this.settings.itemsToShow+.5)-10,this.track.firstChild.style.marginLeft=this.itemWidth/4+"px"),this.items.forEach(function(i){i.style.width=t.itemWidth+"px"}),this.clones.forEach(function(i){i.style.width=t.itemWidth+"px"}),this.goTo(this.currentItem)},i.prototype.goTo=function(t){var i=this;if(!this.isSliding){this.isSliding=!0;var e=this.itemWidth+10,s=this.settings.infiniteScroll?(this.itemsCount+1)*e:0;this.track.style.transition="0.5s",this.track.style.transform="translate("+(t*-e-s)+"px, 0)",this.currentItem=t,setTimeout(function(){i.track.style.transition="0s",i.currentItem>i.itemsCount&&(i.currentItem=0,i.track.style.transform="translate("+-s+"px, 0)"),i.currentItem<0&&(i.currentItem=i.itemsCount,i.track.style.transform="translate("+(i.itemsCount*-e-s)+"px, 0)"),i.isSliding=!1},500)}},i.prototype.next=function(){(this.currentItem!==this.itemsCount-(this.settings.itemsToShow-1)||this.settings.infiniteScroll)&&this.goTo(this.currentItem+this.settings.itemsToScroll)},i.prototype.back=function(){(0!==this.currentItem||this.settings.infiniteScroll)&&this.goTo(this.currentItem-this.settings.itemsToScroll)},i});