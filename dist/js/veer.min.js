!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Veer=e()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}var e=function(e,i){void 0===i&&(i={});var n=i.itemsToShow;void 0===n&&(n=1);var s=i.itemsToScroll;void 0===s&&(s=1);var o=i.infiniteScroll;void 0===o&&(o=!0);var r=i.centerMode;void 0===r&&(r=!1),this.el=t(e),this.settings={itemsToShow:n,itemsToScroll:s,infiniteScroll:o,centerMode:r},this.init()};return e.prototype.init=function(){this.items=Array.from(this.el.querySelectorAll(':scope > *:not([class^="veer"])')),this.itemsCount=this.items.length,this.currentItem=0,this.itemWidth=0,this.clones=[],this.containerWidth=0,this.track=null,this.nextButton=this.el.querySelector(".veer-next"),this.prevButton=this.el.querySelector(".veer-prev"),this.isSliding=!1,this.initWrapper(),this.initEvents(),this.settings.infiniteScroll&&this.initClones(),this.updateWidth()},e.prototype.initWrapper=function(){var t=this,e=document.createDocumentFragment();this.track=document.createElement("div"),this.track.classList.add("veer-track"),this.items.forEach(function(e,i){var n=document.createElement("div");n.classList.add("veer-item"),n.appendChild(e),t.items[i]=n,t.track.appendChild(n)}),e.appendChild(this.track),this.el.appendChild(e)},e.prototype.initClones=function(){var t=this,e=document.createDocumentFragment();this.items.forEach(function(i){var n=i.cloneNode(!0);n.classList.add("veer-clone"),t.clones.push(n),e.appendChild(n)}),this.track.appendChild(e);var i=document.createDocumentFragment();this.items.forEach(function(e){var n=e.cloneNode(!0);n.classList.add("veer-clone"),t.clones.push(n),i.appendChild(n)}),this.track.insertBefore(i,this.track.firstChild)},e.prototype.initEvents=function(){var t=this;this.nextButton&&this.nextButton.addEventListener("click",this.next.bind(this),!1),this.prevButton&&this.prevButton.addEventListener("click",this.prev.bind(this),!1),this.track.addEventListener("mousedown",function(e){if(0===e.button){var i={},n={};t.delta={},t.track.classList.add("is-grabbing"),e.preventDefault(),i.x=e.clientX,i.y=e.clientY;var s=function(e){n.x=e.clientX,n.y=e.clientY,t.delta.x=n.x-i.x,t.delta.y=n.y-i.y,t.updateItemsTranslate(t.delta.x)},o=function(){var e=Math.floor((-t.delta.x+t.itemWidth/2)/t.itemWidth);t.track.classList.remove("is-grabbing"),t.goTo(t.currentItem+e),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)}}),this.track.addEventListener("touchstart",function(e){console.log(e);var i={},n={};t.delta={},t.track.classList.add("is-grabbing"),e.preventDefault(),i.x=e.touches[0].clientX,i.y=e.touches[0].clientY;var s=function(e){n.x=e.touches[0].clientX,n.y=e.touches[0].clientY,t.delta.x=n.x-i.x,t.delta.y=n.y-i.y,t.updateItemsTranslate(t.delta.x)},o=function(){var e=Math.floor((-t.delta.x+t.itemWidth/2)/t.itemWidth);t.track.classList.remove("is-grabbing"),t.goTo(t.currentItem+e),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",o)};document.addEventListener("touchmove",s),document.addEventListener("touchend",o)}),window.addEventListener("resize",this.updateWidth.bind(this),!1)},e.prototype.updateWidth=function(){var t=this;this.containerWidth=this.el.offsetWidth,this.itemWidth=this.containerWidth/this.settings.itemsToShow,this.settings.centerMode&&(this.itemWidth=this.containerWidth/(this.settings.itemsToShow+.5),this.track.firstChild.style.marginLeft=this.itemWidth/4+"px"),this.items.forEach(function(e){e.style.width=t.itemWidth+"px"}),this.clones.forEach(function(e){e.style.width=t.itemWidth+"px"}),this.goTo(this.currentItem)},e.prototype.goTo=function(t){var e=this;this.isSliding||(this.isSliding=!0,this.track.style.transition="0.5s",this.currentItem=this.settings.infiniteScroll?t:Math.min(Math.max(t,0),this.itemsCount-this.settings.itemsToShow),this.updateItemsTranslate(),setTimeout(function(){e.isSliding=!1,e.track.style.transition="",e.settings.infiniteScroll&&(e.currentItem=e.normalizeCurrentItemIndex(e.currentItem),e.updateItemsTranslate())},500))},e.prototype.next=function(){this.goTo(this.currentItem+this.settings.itemsToScroll)},e.prototype.prev=function(){this.goTo(this.currentItem-this.settings.itemsToScroll)},e.prototype.updateItemsTranslate=function(t){void 0===t&&(t=0);var e=this.settings.infiniteScroll?this.itemsCount*this.itemWidth:0;this.track.style.transform="translate3d("+(this.currentItem*-this.itemWidth-e+t)+"px, 0, 0)"},e.prototype.normalizeCurrentItemIndex=function(t){return console.log(t),t>=this.itemsCount?(t-=this.itemsCount,this.normalizeCurrentItemIndex(t)):t<0?(t+=this.itemsCount,this.normalizeCurrentItemIndex(t)):t},e});